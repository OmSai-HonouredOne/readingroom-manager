{% extends "admin/baseadmin.html" %}

{% block title %}
All Entries
{% endblock %}

{% block body %}
<div class="container my-5">
    <div class="card p-4">
        <form action="{{ url_for('admin.entries', date=entry_date) }}" method="POST">
            <div class="input-group mb-4">
                <!-- in date showing follow ddmmyyyy format and not mmddyyyy in input-->
                <input type="date" class="form-control" name="entry_date" value="{{ entry_date }}" required>
                <button class="btn btn-primary" type="submit">Filter</button>
            </div>
        </form>
        <h3 class="text-center mb-4" style="color:#60a5fa;">Entries for {{ entry_date }}</h3>
        <div class="justify-content-between mb-3 d-flex">
            <a href="{{ url_for('admin.entries', date=next_date) }}" class="btn btn-primary">Next</a>
            <a href="{{ url_for('admin.entries', date=previous_date) }}" class="btn btn-primary">Previous</a>
        </div>

        {% if entries|length == 0 %}
        <div class="alert alert-info text-center" role="alert">
            No entries found for this date.
        </div>
        {% else %}
        <div class="table-responsive">
            <table class="table table-dark table-bordered table-hover text-center align-middle">
                <thead style="background-color:#1e293b;">
                    <tr>
                        <th>Session ID</th>
                        <th>Box No.</th>
                        <th>Registration Number</th>
                        <th>Name</th>
                        <th>Branch</th>
                        <th>In Time</th>
                        <th>Out Time</th>
                    </tr>
                </thead>
                <tbody>
                    {% for e in entries %}
                    <tr>
                        <td>{{ e.session_id }}</td>
                        <td>{{ e.box_no }}</td>
                        <td>{{ e.regno }}</td>
                        <td>{{ e.name }}</td>
                        <td>{{ e.branch }}</td>
                        <td>{{ e.in_time_formatted }}</td>
                        <td>
                            {% if e.out_time_formatted %}
                            {{ e.out_time_formatted }}
                            {% else %}
                            <span style="color:#facc15;">Active</span>
                            {% endif %}
                        </td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
        {% endif %}

    </div>

</div>
{% endblock %}